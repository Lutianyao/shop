import{a as w}from"./index.esm.a71c9237.js";import{_ as V,c as x,a as n,b as u,w as a,F as b,e as r,o as C,g as p}from"./index.b66bf6c1.js";const k={created(){this.avatar=[{url:this.LoginUser.avatar}],this.cover=[{url:this.LoginUser.cover}]},data(){return{showArea:!1,areaList:w,LoginUser:this.$cookies.get("LoginUser"),RegionCode:null,avatar:[],cover:[]}},methods:{onClickLeft(){this.$router.go(-1)},async Profile(s){let e={userid:this.LoginUser.id?this.LoginUser.id:0,nickname:s.nickname,sex:s.sex,content:s.content};this.RegionCode&&(e.code=this.RegionCode),s.password&&(e.password=s.password);let i=s.avatar[0]?s.avatar[0].file:{};i&&(e.avatar=i);let d=s.cover[0]?s.cover[0].file:{};d&&(e.cover=d);let o=await this.$api.profile(e);o.code===1?this.$notify({type:"success",message:o.msg,onClose:()=>{this.$cookies.set("LoginUser",o.data),this.$router.push("/user/base/index")}}):this.$notify({type:"warning",message:o.msg})},onConfirm(s){let[e,i,d]=s,o="",l=null;e&&(o+=e.name+"-",l=e.code),i&&(o+=i.name+"-",l=i.code),d&&(l=d.code,o+=d.name),this.LoginUser.region_text=o,this.RegionCode=l,this.showArea=!1}}},y={class:"user"},A={class:"user-image"},R=["src"],B={class:"form"},N=p("\u4FDD\u5BC6"),z=p("\u7537"),F=p("\u5973"),P={style:{margin:"16px"}},S=p(" \u63D0\u4EA4 ");function q(s,e,i,d,o,l){const f=r("van-nav-bar"),m=r("van-field"),c=r("van-radio"),g=r("van-radio-group"),_=r("van-uploader"),v=r("van-button"),h=r("van-form"),U=r("van-area"),L=r("van-popup");return C(),x(b,null,[n(f,{title:"\u57FA\u672C\u8D44\u6599","left-arrow":"",onClickLeft:l.onClickLeft},null,8,["onClickLeft"]),u("div",y,[u("div",A,[u("img",{src:o.LoginUser.avatar,alt:""},null,8,R)])]),u("div",B,[n(h,{onSubmit:l.Profile},{default:a(()=>[n(m,{modelValue:o.LoginUser.nickname,"onUpdate:modelValue":e[0]||(e[0]=t=>o.LoginUser.nickname=t),name:"nickname",label:"\u6635\u79F0",placeholder:"\u8BF7\u8F93\u5165\u6635\u79F0",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u6635\u79F0"}]},null,8,["modelValue"]),n(m,{modelValue:o.LoginUser.password,"onUpdate:modelValue":e[1]||(e[1]=t=>o.LoginUser.password=t),type:"password",name:"password",label:"\u5BC6\u7801",placeholder:"\u5BC6\u7801"},null,8,["modelValue"]),n(m,{name:"sex",label:"\u6027\u522B"},{input:a(()=>[n(g,{modelValue:o.LoginUser.sex,"onUpdate:modelValue":e[2]||(e[2]=t=>o.LoginUser.sex=t),direction:"horizontal"},{default:a(()=>[n(c,{name:"0"},{default:a(()=>[N]),_:1}),n(c,{name:"1"},{default:a(()=>[z]),_:1}),n(c,{name:"2"},{default:a(()=>[F]),_:1})]),_:1},8,["modelValue"])]),_:1}),n(m,{modelValue:o.LoginUser.region_text,"onUpdate:modelValue":e[3]||(e[3]=t=>o.LoginUser.region_text=t),"is-link":"",readonly:"",name:"code",label:"\u5730\u533A\u9009\u62E9",placeholder:"\u70B9\u51FB\u9009\u62E9\u7701\u5E02\u533A",onClick:e[4]||(e[4]=t=>o.showArea=!0)},null,8,["modelValue"]),n(m,{modelValue:o.LoginUser.content,"onUpdate:modelValue":e[5]||(e[5]=t=>o.LoginUser.content=t),rows:"2",autosize:"",label:"\u4E2A\u4EBA\u7B80\u4ECB",type:"textarea",name:"content",maxlength:"50",placeholder:"\u8BF7\u8F93\u5165\u7559\u8A00","show-word-limit":""},null,8,["modelValue"]),n(m,{name:"avatar",label:"\u4FEE\u6539\u5934\u50CF"},{input:a(()=>[n(_,{modelValue:o.avatar,"onUpdate:modelValue":e[6]||(e[6]=t=>o.avatar=t),"max-count":"1"},null,8,["modelValue"])]),_:1}),n(m,{name:"cover",label:"\u4FEE\u6539\u5C01\u9762"},{input:a(()=>[n(_,{modelValue:o.cover,"onUpdate:modelValue":e[7]||(e[7]=t=>o.cover=t),"max-count":"1"},null,8,["modelValue"])]),_:1}),u("div",P,[n(v,{round:"",block:"",type:"primary","native-type":"submit"},{default:a(()=>[S]),_:1})])]),_:1},8,["onSubmit"]),n(L,{show:o.showArea,"onUpdate:show":e[9]||(e[9]=t=>o.showArea=t),position:"bottom"},{default:a(()=>[n(U,{"area-list":o.areaList,onConfirm:l.onConfirm,onCancel:e[8]||(e[8]=t=>o.showArea=!1)},null,8,["area-list","onConfirm"])]),_:1},8,["show"])])],64)}const j=V(k,[["render",q]]);export{j as default};
