import{_ as O,c as p,a as _,w as a,b as i,F as v,r as y,d as m,e as l,o,f as h,t as f,g as c}from"./index.29ac6457.js";const $={created(){this.OrderData()},data(){return{active:0,tarList:[{title:"\u5168\u90E8",name:0},{title:"\u5DF2\u652F\u4ED8",name:1},{title:"\u5DF2\u53D1\u8D27",name:2},{title:"\u5DF2\u6536\u8D27",name:3},{title:"\u5DF2\u8BC4\u4EF7",name:4},{title:"\u7533\u8BF7\u9000\u8D27",name:-2},{title:"\u5DF2\u9000\u8D27",name:-1},{title:"\u9000\u8D27\u88AB\u62D2",name:-3}],OrderList:[],LoginUser:this.$cookies.get("LoginUser"),value:0,show:!1,orderid:0}},methods:{onClickLeft(){this.$router.push("/user/base/index")},async OrderData(){let s=await this.$api.OrderIndex({userid:this.LoginUser.id,status:this.active});s.code===1&&(this.OrderList=s.data)},onTab(){this.OrderData()},onAfter(s){this.$dialog.confirm({message:"\u786E\u5B9A\u7533\u8BF7\u9000\u8D27\uFF1F"}).then(async()=>{let e=await this.$api.ProAfter(s);this.$toast(e.msg),setTimeout(()=>{location.reload()},1500)}).catch(()=>{})},onReceipt(s){this.$dialog.confirm({message:'\u5982\u679C\u60A8\u6CA1\u6709\u6536\u5230\u8D27\u7269\uFF0C\u6216\u8005\u8D27\u7269\u6709\u95EE\u9898\uFF0C\u8BF7\u53CA\u65F6\u7533\u8BF7\u9000\u6B3E\uFF0C\u5207\u52FF\u70B9\u51FB"\u786E\u8BA4\u6536\u8D27"'}).then(async()=>{let e=await this.$api.Receipt(s);if(e.code==0)return this.$toast.fail(e.msg),!1;this.$toast.success(e.msg),setTimeout(()=>{location.reload()},1500)}).catch(()=>{})},showPopup(s){this.show=!0,this.orderid=s},async onRate(){let s={orderid:this.orderid,rate:this.value},e=await this.$api.Rate(s);if(e.code==0)return this.$toast.fail(e.msg),!1;this.$toast(e.msg),setTimeout(()=>{location.reload()},1500)},onDel(s){this.$dialog.confirm({message:"\u786E\u8BA4\u5220\u9664\u8BE5\u8BA2\u5355\uFF1F"}).then(async()=>{let e=await this.$api.Del(s);if(e.code==0)return this.$toast.fail(e.msg),!1;this.$toast.success(e.msg),setTimeout(()=>{location.reload()},1500)}).catch(()=>{})}}},z={class:"list-box"},D={key:0,class:"list"},T={class:"header"},V={class:"left"},R=c("\u8BA2\u5355\u53F7\uFF1A"),U={class:"right"},B={class:"content"},N={class:"footer"},P={class:"date"},A={class:"btn"},q=c("\u8BA2\u5355\u8BE6\u60C5 "),F=c("\u7533\u8BF7\u9000\u8D27 "),E=c("\u67E5\u770B\u7269\u6D41 "),I=c("\u786E\u8BA4\u6536\u8D27 "),S=c("\u7ACB\u5373\u8BC4\u4EF7"),j=c("\u5220\u9664\u8BA2\u5355"),G=i("text",null,"\u60A8\u7684\u4E94\u661F\u597D\u8BC4\uFF0C\u662F\u6211\u4EEC\u65E0\u9650\u7684\u52A8\u529B",-1),H=c("\u8BC4\u4EF7");function J(s,e,K,M,r,d){const g=l("van-nav-bar"),k=l("van-tab"),C=l("van-tabs"),b=l("van-card"),u=l("van-button"),w=l("van-cell"),x=l("van-rate"),L=l("van-popup");return o(),p(v,null,[_(g,{title:"\u6211\u7684\u8BA2\u5355","left-arrow":"",onClickLeft:d.onClickLeft},null,8,["onClickLeft"]),_(C,{active:r.active,"onUpdate:active":e[0]||(e[0]=t=>r.active=t),onChange:d.onTab},{default:a(()=>[(o(!0),p(v,null,y(r.tarList,t=>(o(),h(k,{title:t.title,name:t.name},null,8,["title","name"]))),256))]),_:1},8,["active","onChange"]),i("div",z,[r.OrderList.length>0?(o(),p("div",D,[(o(!0),p(v,null,y(r.OrderList,t=>(o(),p("div",{class:"item",key:t.id},[i("div",T,[i("div",V,[R,i("span",null,f(t.code),1)]),i("div",U,f(t.status_text),1)]),i("div",B,[(o(!0),p(v,null,y(t.OrderProduct,n=>(o(),h(b,{key:n.id,num:n.nums,price:n.total,desc:"\u63CF\u8FF0\u4FE1\u606F",title:n.products.name,thumb:n.products.cover_cdn},{desc:a(()=>[i("span",null,"\u5546\u54C1\u5355\u4EF7\uFF1A\uFFE5"+f(n.price),1)]),_:2},1032,["num","price","title","thumb"]))),128))]),i("div",N,[i("div",P,f(t.createtime),1),i("div",A,[_(u,{type:"primary",size:"mini",color:"#7232dd",to:{path:"/order/order/info",query:{orderid:t.id}}},{default:a(()=>[q]),_:2},1032,["to"]),t.status>=1&&t.status<=4?(o(),h(u,{key:0,type:"primary",size:"mini",onClick:n=>d.onAfter({orderid:t.id})},{default:a(()=>[F]),_:2},1032,["onClick"])):m("",!0),t.status>=2&&t.status<=4||t.status<0?(o(),h(u,{key:1,type:"primary",size:"mini",to:{path:"/order/order/logistics",query:{orderid:t.id}}},{default:a(()=>[E]),_:2},1032,["to"])):m("",!0),t.status==2?(o(),h(u,{key:2,type:"primary",size:"mini",onClick:n=>d.onReceipt({orderid:t.id})},{default:a(()=>[I]),_:2},1032,["onClick"])):m("",!0),t.status==3?(o(),h(u,{key:3,type:"primary",size:"mini"},{default:a(()=>[_(w,{onClick:n=>d.showPopup(t.id)},{default:a(()=>[S]),_:2},1032,["onClick"])]),_:2},1024)):m("",!0),t.status>=3?(o(),h(u,{key:4,type:"danger",size:"mini",onClick:n=>d.onDel({orderid:t.id})},{default:a(()=>[j]),_:2},1032,["onClick"])):m("",!0)])])]))),128))])):m("",!0)]),_(L,{class:"rate",position:"bottom",show:r.show,"onUpdate:show":e[2]||(e[2]=t=>r.show=t)},{default:a(()=>[_(x,{size:"30px",modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=t=>r.value=t)},null,8,["modelValue"]),G,_(u,{round:"",type:"primary",onClick:d.onRate,block:""},{default:a(()=>[H]),_:1},8,["onClick"])]),_:1},8,["show"])],64)}const W=O($,[["render",J]]);export{W as default};
