import{_ as f,c as u,a as t,b as o,i as b,w as i,F as y,e as a,o as l,f as m,g as h,t as w}from"./index.29ac6457.js";const C={data(){return{LoginUser:this.$cookies.get("LoginUser"),code:null,time:60*1e3,showCountdown:!1}},methods:{back(){this.$router.push("/user/base/index")},countDownFinish(){this.showCountdown=!1},async getSmsCode(){this.showCountdown=!0;let n=await this.$api.email({userid:this.LoginUser.id});n.code=="1"?this.$notify({type:"success",message:n.msg,duration:1e3}):this.$notify({message:n.msg,duration:1e3})},async ChangeCode(){if(this.code=="")this.$toast("\u9A8C\u8BC1\u7801\u4E0D\u80FD\u4E3A\u7A7A");else{let n={userid:this.LoginUser.id,code:this.code},s=await this.$api.emailcode(n);s.code===1&&(this.$toast(s.msg),this.$router.push("/user/base/index"))}}}},k={class:"user-image"},x=["src"],L={key:0},U=o("div",{role:"alert",class:"van-notice-bar",style:{padding:"10px"}},[o("i",{class:"van-badge__wrapper van-icon van-icon-warning van-notice-bar__left-icon"}),o("div",{role:"marquee",class:"van-notice-bar__wrap"},[o("div",{class:"van-notice-bar__content",style:{"transition-duration":"0s","white-space":"pre-wrap",padding:"3px 0px"}}," \u516C\u544A\uFF1A\u9A8C\u8BC1\u7801\u533A\u522B\u5927\u5C0F\uFF0C\u8BF7\u53BB\u6CE8\u518C\u90AE\u7BB1\u67E5\u770B\u90AE\u4EF6\uFF0C\u83B7\u53D6\u9A8C\u8BC1\u7801\uFF0C\uFF01\uFF01\uFF01 ")])],-1),V=h("\u91CD\u65B0\u83B7\u53D6\u9A8C\u8BC1\u7801"),F={key:1},S={style:{padding:"10px 2px"}};function z(n,s,B,D,e,r){const p=a("van-nav-bar"),g=a("van-count-down"),c=a("van-button"),_=a("van-field"),v=a("van-form");return l(),u(y,null,[t(p,{title:"\u5E10\u53F7\u8BA4\u8BC1","left-arrow":"",onClickLeft:r.back},null,8,["onClickLeft"]),o("div",{class:"user",style:b({background:"url("+e.LoginUser.cover+")"})},[o("div",k,[o("img",{src:e.LoginUser.avatar,alt:""},null,8,x)])],4),e.LoginUser.auth==0?(l(),u("div",L,[U,t(_,{modelValue:e.code,"onUpdate:modelValue":s[0]||(s[0]=d=>e.code=d),clearable:"",maxlength:"4",label:"\u9A8C\u8BC1\u7801",placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"},{button:i(()=>[e.showCountdown?(l(),m(c,{key:0,ref:"smsCode",size:"mini"},{default:i(()=>[t(g,{time:e.time,style:{color:"#777"},onFinish:r.countDownFinish,format:"ss \u79D2\u540E\u91CD\u8BD5"},null,8,["time","onFinish"])]),_:1},512)):(l(),m(c,{key:1,onClick:r.getSmsCode,type:"primary",size:"mini"},{default:i(()=>[V]),_:1},8,["onClick"]))]),_:1},8,["modelValue"])])):(l(),u("div",F,[t(v,{onSubmit:n.Profile},{default:i(()=>[t(_,{modelValue:e.LoginUser.email,"onUpdate:modelValue":s[1]||(s[1]=d=>e.LoginUser.email=d),label:"\u90AE\u7BB1",readonly:""},null,8,["modelValue"])]),_:1},8,["onSubmit"])])),o("div",S,[t(c,{type:"primary",disabled:e.LoginUser.auth==1,size:"normal",block:"",onClick:r.ChangeCode},{default:i(()=>[h(w(e.LoginUser.auth==1?"\u5DF2\u9A8C\u8BC1":"\u9A8C\u8BC1"),1)]),_:1},8,["disabled","onClick"])])],64)}const q=f(C,[["render",z]]);export{q as default};
