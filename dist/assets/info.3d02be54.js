import{_ as L,c as l,a as e,w as r,b as i,t as s,g as _,F as f,e as o,o as a,r as C,f as w}from"./index.b66bf6c1.js";const x={created(){let n=this.$route.query.proid;this.proid=n,this.ProInfo()},data(){return{proid:0,info:{},LoginUser:this.$cookies.get("LoginUser")}},methods:{onClickLeft(){this.$router.go(-1)},async ProInfo(){let n=await this.$api.ProductInfo({proid:this.proid,userid:this.LoginUser?this.LoginUser.id:0});if(n.code===0)return this.$notify({type:"warning",message:n.msg}),this.$router.go(-1),!1;this.info=n.data},async onCart(){if(!this.LoginUser||JSON.stringify(this.LoginUser)=="{}")return this.$toast.loading({type:"fail",message:"\u8BF7\u5148\u767B\u5F55",onClose:()=>{this.$dialog.confirm({message:"\u662F\u5426\u9700\u8981\u767B\u5F55\uFF1F"}).then(()=>{this.$router.push("/user/base/login")}).catch(()=>{})}}),!1;let n={proid:this.proid,userid:this.LoginUser.id},c=await this.$api.CartAdd(n);if(c.code===1)return this.$toast.loading({type:"success",message:c.msg}),!1;this.$notify({type:"warning",message:c.msg})},async onBuy(){if(!this.LoginUser||JSON.stringify(this.LoginUser)=="{}")return this.$toast.loading({type:"fail",message:"\u8BF7\u5148\u767B\u5F55",onClose:()=>{this.$dialog.confirm({message:"\u662F\u5426\u9700\u8981\u767B\u5F55\uFF1F"}).then(()=>{this.$router.push("/user/base/login")}).catch(()=>{})}}),!1;this.$router.push({path:"/product/cart/confirm",query:{proid:this.proid}})}}},U=["src"],$={class:"detailbox"},B={key:0,class:"price"},N=i("em",null,"\uFFE5",-1),q={key:1,class:"price"},I=i("em",null,"\uFFE5",-1),P=["innerHTML"];function S(n,c,T,V,t,u){const g=o("van-nav-bar"),m=o("van-swipe-item"),y=o("van-swipe"),p=o("font"),h=o("van-action-bar-icon"),d=o("van-action-bar-button"),v=o("van-action-bar");return a(),l(f,null,[e(g,{title:t.info.name,"left-arrow":"",onClickLeft:u.onClickLeft},null,8,["title","onClickLeft"]),e(y,{autoplay:3e3,"indicator-color":"white"},{default:r(()=>[(a(!0),l(f,null,C(t.info.thumbs_cdn,(k,b)=>(a(),w(m,{key:b},{default:r(()=>[i("img",{src:k},null,8,U)]),_:2},1024))),128))]),_:1}),i("div",$,[i("h4",null,s(t.info.name),1),t.info.vip_price?(a(),l("div",B,[N,_(s(t.info.vip_price),1),i("span",null,"\uFFE5"+s(t.info.price),1),e(p,null,{default:r(()=>[_("\u5E93\u5B58\uFF1A"+s(t.info.stock)+"\u4EF6",1)]),_:1})])):(a(),l("div",q,[I,_(s(t.info.price),1),e(p,null,{default:r(()=>[_("\u5E93\u5B58\uFF1A"+s(t.info.stock)+"\u4EF6",1)]),_:1})]))]),i("div",{class:"detailbox_2",innerHTML:t.info.content},null,8,P),e(v,{style:{"max-width":"512px"}},{default:r(()=>[e(h,{icon:"chat-o",text:"\u5BA2\u670D"}),e(h,{icon:"cart-o",to:{path:"/product/cart/index",query:{action:"cart"}},text:"\u8D2D\u7269\u8F66"}),e(d,{type:"warning",text:"\u52A0\u5165\u8D2D\u7269\u8F66",onClick:u.onCart},null,8,["onClick"]),e(d,{type:"danger",text:"\u7ACB\u5373\u8D2D\u4E70",onClick:u.onBuy},null,8,["onClick"])]),_:1})],64)}const H=L(x,[["render",S]]);export{H as default};
